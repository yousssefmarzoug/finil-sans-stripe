{"ast":null,"code":"import axios from \"axios\";\n\n// GET\nexport const getProducts = () => {\n  return new Promise((onSuccess, onFail) => {\n    axios.get(\"/api/products\").then((response, error) => {\n      if (!response || error) {\n        return onFail(`Response failure : ${error}`);\n      }\n      onSuccess(response);\n    }).catch(err => onFail(err));\n  });\n};\nexport const getUser = body => {\n  return new Promise((onSuccess, onFail) => {\n    console.log(body.profile); // realm return an object with user's profile details and email, we use the email to identify the user connected and retrieve profile details\n    // check the object in the console to see properties\n    axios.get(`/api/user/${body.profile.email}`, {\n      params: {\n        email: body.profile.email\n      }\n    }).then((response, error) => {\n      if (!response || error) {\n        return onFail(`Response failure : ${error}`);\n      }\n      onSuccess(response.data);\n    }).catch(err => onFail(err));\n  });\n};\n\n// POST\nexport const addUser = body => {\n  return new Promise((onSuccess, onFail) => {\n    axios.post(\"/api/users/add\", body).then((response, error) => {\n      if (!response || error) {\n        return onFail(`Response failure : ${error}`);\n      }\n      onSuccess(`user profile successfully created`);\n    }).catch(err => onFail(err));\n  });\n};","map":{"version":3,"names":["axios","getProducts","Promise","onSuccess","onFail","get","then","response","error","catch","err","getUser","body","console","log","profile","email","params","data","addUser","post"],"sources":["F:/The_Complete_2023_Web_Development_Bootcamp_2023/des projets/final-sans-stripte/client/src/lib/service/index.js"],"sourcesContent":["import axios from \"axios\";\n\n// GET\nexport const getProducts = () => {\n  return new Promise((onSuccess, onFail) => {\n    axios\n      .get(\"/api/products\")\n      .then((response, error) => {\n        if (!response || error) {\n          return onFail(`Response failure : ${error}`);\n        }\n        onSuccess(response);\n      })\n      .catch((err) => onFail(err));\n  });\n};\n\n\nexport const getUser = (body) => {\n  return new Promise((onSuccess, onFail) => {\n    console.log(body.profile) // realm return an object with user's profile details and email, we use the email to identify the user connected and retrieve profile details\n    // check the object in the console to see properties\n    axios\n      .get(`/api/user/${body.profile.email}`,  {\n        params: {\n          email: body.profile.email\n        }\n      }) \n      .then((response, error) => {\n        if (!response || error) {\n          return onFail(`Response failure : ${error}`);\n        }\n        onSuccess(response.data);\n      })\n      .catch((err) => onFail(err));\n  });\n};\n\n// POST\nexport const addUser = (body) => {\n  return new Promise((onSuccess, onFail) => {\n    axios\n      .post(\"/api/users/add\", body)\n      .then((response, error) => {\n        if (!response || error) {\n          return onFail(`Response failure : ${error}`);\n        }\n        onSuccess(`user profile successfully created`);\n      })\n      .catch((err) => onFail(err));\n  });\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAC/B,OAAO,IAAIC,OAAO,CAAC,CAACC,SAAS,EAAEC,MAAM,KAAK;IACxCJ,KAAK,CACFK,GAAG,CAAC,eAAe,CAAC,CACpBC,IAAI,CAAC,CAACC,QAAQ,EAAEC,KAAK,KAAK;MACzB,IAAI,CAACD,QAAQ,IAAIC,KAAK,EAAE;QACtB,OAAOJ,MAAM,CAAE,sBAAqBI,KAAM,EAAC,CAAC;MAC9C;MACAL,SAAS,CAACI,QAAQ,CAAC;IACrB,CAAC,CAAC,CACDE,KAAK,CAAEC,GAAG,IAAKN,MAAM,CAACM,GAAG,CAAC,CAAC;EAChC,CAAC,CAAC;AACJ,CAAC;AAGD,OAAO,MAAMC,OAAO,GAAIC,IAAI,IAAK;EAC/B,OAAO,IAAIV,OAAO,CAAC,CAACC,SAAS,EAAEC,MAAM,KAAK;IACxCS,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,OAAO,CAAC,EAAC;IAC1B;IACAf,KAAK,CACFK,GAAG,CAAE,aAAYO,IAAI,CAACG,OAAO,CAACC,KAAM,EAAC,EAAG;MACvCC,MAAM,EAAE;QACND,KAAK,EAAEJ,IAAI,CAACG,OAAO,CAACC;MACtB;IACF,CAAC,CAAC,CACDV,IAAI,CAAC,CAACC,QAAQ,EAAEC,KAAK,KAAK;MACzB,IAAI,CAACD,QAAQ,IAAIC,KAAK,EAAE;QACtB,OAAOJ,MAAM,CAAE,sBAAqBI,KAAM,EAAC,CAAC;MAC9C;MACAL,SAAS,CAACI,QAAQ,CAACW,IAAI,CAAC;IAC1B,CAAC,CAAC,CACDT,KAAK,CAAEC,GAAG,IAAKN,MAAM,CAACM,GAAG,CAAC,CAAC;EAChC,CAAC,CAAC;AACJ,CAAC;;AAED;AACA,OAAO,MAAMS,OAAO,GAAIP,IAAI,IAAK;EAC/B,OAAO,IAAIV,OAAO,CAAC,CAACC,SAAS,EAAEC,MAAM,KAAK;IACxCJ,KAAK,CACFoB,IAAI,CAAC,gBAAgB,EAAER,IAAI,CAAC,CAC5BN,IAAI,CAAC,CAACC,QAAQ,EAAEC,KAAK,KAAK;MACzB,IAAI,CAACD,QAAQ,IAAIC,KAAK,EAAE;QACtB,OAAOJ,MAAM,CAAE,sBAAqBI,KAAM,EAAC,CAAC;MAC9C;MACAL,SAAS,CAAE,mCAAkC,CAAC;IAChD,CAAC,CAAC,CACDM,KAAK,CAAEC,GAAG,IAAKN,MAAM,CAACM,GAAG,CAAC,CAAC;EAChC,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"module"}